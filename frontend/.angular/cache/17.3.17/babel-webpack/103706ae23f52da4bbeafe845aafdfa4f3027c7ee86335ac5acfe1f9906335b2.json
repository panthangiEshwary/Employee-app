{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/employee.service\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nexport let AvailabilityComponent = /*#__PURE__*/(() => {\n  class AvailabilityComponent {\n    constructor(employeeService, auth, router) {\n      this.employeeService = employeeService;\n      this.auth = auth;\n      this.router = router;\n      this.employee = null;\n      this.loading = true;\n      this.saving = false;\n      this.error = null;\n      this.success = null;\n      this.statuses = ['AVAILABLE', 'UNAVAILABLE', 'ON_LEAVE'];\n    }\n    ngOnInit() {\n      this.fetch();\n    }\n    fetch() {\n      this.loading = true;\n      this.error = null;\n      this.employeeService.getSelf().subscribe({\n        next: emp => {\n          this.employee = emp;\n          this.loading = false;\n        },\n        error: err => {\n          this.error = err?.error || 'Failed to load profile';\n          this.loading = false;\n        }\n      });\n    }\n    changeStatus(status) {\n      if (!this.employee) return;\n      this.saving = true;\n      this.error = null;\n      this.success = null;\n      this.employeeService.updateAvailability(status).subscribe({\n        next: emp => {\n          this.employee = emp;\n          this.saving = false;\n          this.success = 'Availability updated';\n        },\n        error: err => {\n          this.error = err?.error || 'Failed to update';\n          this.saving = false;\n        }\n      });\n    }\n    logout() {\n      this.auth.logout();\n      this.router.navigate(['/login']);\n    }\n    static {\n      this.ɵfac = function AvailabilityComponent_Factory(t) {\n        return new (t || AvailabilityComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AvailabilityComponent,\n        selectors: [[\"app-availability\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 0,\n        vars: 0,\n        template: function AvailabilityComponent_Template(rf, ctx) {},\n        dependencies: [CommonModule],\n        styles: [\".status-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;text-transform:uppercase}.status-AVAILABLE[_ngcontent-%COMP%]{background-color:#c7f5d9;color:#0b7a27}.status-UNAVAILABLE[_ngcontent-%COMP%]{background-color:#fdd;color:#b30000}.status-ON_LEAVE[_ngcontent-%COMP%]{background-color:#ffecc2;color:#a66b00}select[_ngcontent-%COMP%]{padding:6px;border-radius:4px;margin-top:8px}\"]\n      });\n    }\n  }\n  return AvailabilityComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}